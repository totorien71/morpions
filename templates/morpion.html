{% extends "base.html" %}

{% block titre %}Jeu du Morpion{% endblock %}

{% block contenu %}
<h1>ðŸŽ® Morpion</h1>

<div id="plateau">
    {% for i in range(9) %}
        <div class="case" data-index="{{ i }}"></div>
    {% endfor %}
</div>

<p id="message"></p>

<script>
    let joueur = "X";
    let cases = Array(9).fill("");

    // Quand la page est chargÃ©e
    window.onload = function () {
        document.querySelectorAll(".case").forEach((c, index) => {
            c.addEventListener("click", () => jouer(index));
        });
    };

    function jouer(index) {
        if (cases[index] !== "" || verifierGagnant()) return;

        cases[index] = joueur;
        document.querySelectorAll(".case")[index].textContent = joueur;
        
        if (verifierGagnant()) {
            document.getElementById("message").textContent = "Le joueur " + joueur + " a gagnÃ© ! ðŸŽ‰";
        } else {
            joueur = joueur === "X" ? "O" : "X";
        }
    }

    function verifierGagnant() {
        const combinaisons = [
            [0,1,2], [3,4,5], [6,7,8],
            [0,3,6], [1,4,7], [2,5,8],
            [0,4,8], [2,4,6]
        ];
        return combinaisons.some(c =>
            cases[c[0]] && cases[c[0]] === cases[c[1]] && cases[c[1]] === cases[c[2]]
        );
    }
</script>
{% endblock %}

